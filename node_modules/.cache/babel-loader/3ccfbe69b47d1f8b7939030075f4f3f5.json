{"ast":null,"code":"import { configureStore, createSlice } from '@reduxjs/toolkit';\nimport initialShopState from '.';\nconst initialState = {\n  products: initialShopState,\n  cart: {\n    items: [],\n    totalQuantity: 0,\n    changed: false\n  },\n  showCart: false,\n  notification: null\n};\nexport const shopSlice = createSlice({\n  name: 'shop',\n  initialState: initialState,\n  reducers: {\n    toggleShowCart(state) {\n      if (state.cart.items.length > 0) {\n        state.showCart = !state.showCart;\n      }\n    },\n\n    addItemToCart(state, action) {\n      const newItem = action.payload;\n      const existingItem = state.cart.items.find(item => item.id === newItem.id);\n\n      if (existingItem) {\n        existingItem.quantity++;\n        existingItem.totalPrice = existingItem.totalPrice + existingItem.price;\n      } else {\n        state.cart.items.push({\n          id: newItem.id,\n          title: newItem.title,\n          price: newItem.price,\n          quantity: 1,\n          totalPrice: newItem.price\n        });\n      }\n\n      state.cart.totalQuantity++;\n      state.cart.changed = true;\n    },\n\n    increment(state, action) {\n      const existingCartItemIndex = state.cart.items.findIndex(item => item.id === action.payload);\n      const existingCartItem = state.cart.items[existingCartItemIndex];\n\n      if (existingCartItem) {\n        existingCartItem.quantity++;\n        existingCartItem.totalPrice = existingCartItem.totalPrice + existingCartItem.price;\n      }\n\n      ;\n      state.cart.totalQuantity++;\n      state.cart.changed = true;\n    },\n\n    decrement(state, action) {\n      const existingCartItemIndex = state.cart.items.findIndex(item => item.id === action.payload);\n      const existingItem = state.cart.items[existingCartItemIndex];\n\n      if (existingItem.quantity === 1) {\n        state.cart.items = state.cart.items.filter(item => item.id !== action.payload);\n      } else {\n        existingItem.quantity--;\n      }\n\n      state.cart.totalQuantity--;\n      state.cart.changed = true;\n    },\n\n    remove(state, action) {\n      const existingCartItemIndex = state.cart.items.findIndex(item => item.id === action.payload);\n      const existingItem = state.cart.items[existingCartItemIndex];\n      state.cart.items = state.cart.items.filter(item => item.id !== action.payload);\n      state.cart.totalQuantity = state.cart.totalQuantity - existingItem.quantity;\n      state.cart.changed = true;\n    },\n\n    showNotification(state, action) {\n      state.notification = {\n        status: action.payload.status,\n        title: action.payload.title,\n        message: action.payload.message\n      };\n    }\n\n  }\n});\nconst store = configureStore({\n  reducer: shopSlice.reducer\n});\nexport const cartActions = shopSlice.actions;\n;\nexport default store; //types\n\n//@ts-ignore\nwindow.store = store;","map":{"version":3,"sources":["C:/Users/Uch/React/udemy course/online-shop-cart/src/store/cartStore.tsx"],"names":["configureStore","createSlice","initialShopState","initialState","products","cart","items","totalQuantity","changed","showCart","notification","shopSlice","name","reducers","toggleShowCart","state","length","addItemToCart","action","newItem","payload","existingItem","find","item","id","quantity","totalPrice","price","push","title","increment","existingCartItemIndex","findIndex","existingCartItem","decrement","filter","remove","showNotification","status","message","store","reducer","cartActions","actions","window"],"mappings":"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","sourcesContent":["import { configureStore, createSlice } from '@reduxjs/toolkit';\r\nimport { v1 } from 'uuid';\r\nimport initialShopState, { ShopStateType } from '.';\r\n\r\n\r\nconst initialState: initialStateType = {\r\n    products: initialShopState,\r\n    cart: {\r\n        items: [],\r\n        totalQuantity: 0,\r\n        changed: false\r\n    },\r\n    showCart: false,\r\n    notification: null\r\n};\r\n\r\nexport const shopSlice = createSlice({\r\n    name: 'shop',\r\n    initialState: initialState,\r\n    reducers: {\r\n        toggleShowCart(state) {\r\n            if (state.cart.items.length > 0) {\r\n                state.showCart = !state.showCart\r\n            }\r\n        },\r\n        addItemToCart(state, action) {\r\n            const newItem = action.payload;\r\n            const existingItem = state.cart.items.find(item => item.id === newItem.id);\r\n            if (existingItem) {\r\n                existingItem.quantity++;\r\n                existingItem.totalPrice = existingItem.totalPrice + existingItem.price;\r\n            } else {\r\n                state.cart.items.push(\r\n                    {\r\n                        id: newItem.id,\r\n                        title: newItem.title,\r\n                        price: newItem.price,\r\n                        quantity: 1,\r\n                        totalPrice: newItem.price,\r\n                    })\r\n            }\r\n            state.cart.totalQuantity++;\r\n            state.cart.changed = true;\r\n        },\r\n        increment(state, action) {\r\n            const existingCartItemIndex = state.cart.items.findIndex(\r\n                (item) => item.id === action.payload\r\n            );\r\n            const existingCartItem = state.cart.items[existingCartItemIndex];\r\n            if (existingCartItem) {\r\n                existingCartItem.quantity++;\r\n                existingCartItem.totalPrice = existingCartItem.totalPrice + existingCartItem.price;\r\n            };\r\n            state.cart.totalQuantity++;\r\n            state.cart.changed = true;\r\n        },\r\n        decrement(state, action) {\r\n            const existingCartItemIndex = state.cart.items.findIndex(\r\n                (item) => item.id === action.payload\r\n            );\r\n            const existingItem = state.cart.items[existingCartItemIndex];\r\n            if (existingItem.quantity === 1) {\r\n                state.cart.items = state.cart.items.filter(item => item.id !== action.payload);\r\n            } else {\r\n                existingItem.quantity--;\r\n            }\r\n            state.cart.totalQuantity--;\r\n            state.cart.changed = true;\r\n        },\r\n        remove(state, action) {\r\n            const existingCartItemIndex = state.cart.items.findIndex(\r\n                (item) => item.id === action.payload\r\n            );\r\n            const existingItem = state.cart.items[existingCartItemIndex];\r\n            state.cart.items = state.cart.items.filter(item => item.id !== action.payload);\r\n            state.cart.totalQuantity = state.cart.totalQuantity - existingItem.quantity;\r\n            state.cart.changed = true;\r\n        },\r\n        showNotification(state, action) {\r\n            state.notification = {\r\n                status: action.payload.status,\r\n                title: action.payload.title,\r\n                message: action.payload.message,\r\n            };\r\n        },\r\n    }\r\n});\r\n\r\nconst store = configureStore({\r\n    reducer: shopSlice.reducer\r\n});\r\n\r\nexport const cartActions = shopSlice.actions;\r\n\r\ndeclare module 'react-redux' {\r\n    interface DefaultRootState extends initialStateType { }\r\n};\r\n\r\nexport default store;\r\n\r\n\r\n//types\r\n\r\nexport type initialStateType = {\r\n    products: ShopStateType,\r\n    cart: {\r\n        items: CartItemType[],\r\n        totalQuantity: number,\r\n        changed: boolean\r\n    },\r\n    showCart: boolean,\r\n    notification: {\r\n        status: string,\r\n        title: string,\r\n        message: string\r\n    } | null\r\n};\r\n\r\nexport type CartItemType = {\r\n    id: string,\r\n    title: string,\r\n    price: number,\r\n    quantity: number,\r\n    totalPrice: number,\r\n}\r\n\r\n//@ts-ignore\r\nwindow.store = store;\r\n\r\n"]},"metadata":{},"sourceType":"module"}